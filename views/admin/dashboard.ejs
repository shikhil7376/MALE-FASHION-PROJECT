<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Skydash Admin</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="vendors/feather/feather.css">
  <link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <link rel="stylesheet" href="vendors/datatables.net-bs4/dataTables.bootstrap4.css">
  <link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" type="text/css" href="js/select.dataTables.min.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="css/vertical-layout-light/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="images/favicon.png" />
</head>
<body>
  <div class="container-scroller">
    <!-- partial:partials/_navbar.html -->
            <%- include("../layout/adminside/navbar") %>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:partials/_settings-panel.html -->
          <%- include("../layout/adminside/settingspanel") %>
      <!-- partial -->
      <!-- partial:partials/_sidebar.html -->
            <%- include("../layout/adminside/sidebar") %>
      <!-- partial -->
      <div class="main-panel">
        <div class="content-wrapper my-custom-wrapper right-0">
          <div class="row">
            <div class="col-md-12 grid-margin">
              <div class="row">
                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                  <h3 class="font-weight-bold">Welcome <%= Admin[0].name %></h3>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card tale-bg">
                <div class="card-people mt-auto">
                  <img src="images/dashboard/people.svg" alt="people">
                </div>
              </div>
            </div>
  
            <div class="col-md-6 grid-margin transparent">
              <div class="row">
                <div class="col-md-6 mb-4 stretch-card transparent">
                  <div class="card card-tale">
                    <div class="card-body">
                      <p class="mb-4">Today’s Orders</p>
                      <p class="fs-30 mb-2">
                        <h3 class="card-title mb-2"><%= todaysOrders %></h3>
                      </p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 mb-4 stretch-card transparent">
                  <div class="card card-dark-blue">
                    <div class="card-body">
                      <p class="mb-4">Monthly Orders</p>
                      <p class="fs-30 mb-2">
                        <h3 class="card-title mb-2"><%= thisMonthsOrders %></h3>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                  <div class="card card-light-blue">
                    <div class="card-body">
                      <p class="mb-4">Monthly Revenue</p>
                      <p class="fs-30 mb-2">
                        <h3 class="card-title text-nowrap mb-1">₹<%= thisMonthsTotalRevenue %></h3>
                      </p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 stretch-card transparent">
                  <div class="card card-light-danger">
                    <div class="card-body">
                      <p class="mb-4">Number of Customers</p>
                      <p class="fs-30 mb-2">
                        <h3 class="card-title mb-2"><%= totalCustomersThisMonth %></h3>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
  
  
          <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Payment Method Distribution</h4>
                  <div class="chart-container">
                    <canvas id="paymentMethodChart"></canvas>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Monthly Sales</h4>
                  <div class="chart-container">
                    <canvas id="monthlySalesChart"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:partials/_footer.html -->
        <footer class="footer">
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright © 2021.  Premium <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin template</a> from BootstrapDash. All rights reserved.</span>
            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made with <i class="ti-heart text-danger ml-1"></i></span>
          </div>
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Distributed by <a href="https://www.themewagon.com/" target="_blank">Themewagon</a></span> 
          </div>
        </footer> 
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>   
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->

  <!-- plugins:js -->
  <script src="vendors/js/vendor.bundle.base.js"></script>

  <!-- endinject -->
  <!-- Plugin js for this page -->
  <script src="vendors/chart.js/Chart.min.js"></script>
  <script src="vendors/datatables.net/jquery.dataTables.js"></script>
  <script src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
  <script src="js/dataTables.select.min.js"></script>

  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <script src="js/off-canvas.js"></script>
  <script src="js/hoverable-collapse.js"></script>
  <script src="js/template.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/todolist.js"></script>
  <!-- endinject -->
  <!-- Custom js for this page-->
  <script src="js/dashboard.js"></script>
  <script src="js/Chart.roundedBarCharts.js"></script>
  
  <script>
    const codCount = '<%= paymentMethods.cod ?paymentMethods.cod: 0  %>'
    const wltCount = '<%= paymentMethods.wlt ?paymentMethods.wlt: 0  %>'
    const rzpCount = '<%= paymentMethods.rzp ?paymentMethods.rzp: 0  %>'

    const 
    paymentMethodData = {
      labels: ['COD', 'Wallet', 'Online'],
      datasets: [{
        data: [codCount, wltCount, rzpCount],
        backgroundColor: ['#FF5733', '#33FF57', '#5733FF'],
      }],
    };

    const monthlySalesData = {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], // Add labels for each month
      datasets: [{
        label: 'Monthly Sales',
        data: [
          '<%= monthlyOrderCountsCurrentYear[0] %>',
          '<%= monthlyOrderCountsCurrentYear[1] %>',
          '<%= monthlyOrderCountsCurrentYear[2] %>',
          '<%= monthlyOrderCountsCurrentYear[3] %>',
          '<%= monthlyOrderCountsCurrentYear[4] %>',
          '<%= monthlyOrderCountsCurrentYear[5] %>',
          '<%= monthlyOrderCountsCurrentYear[6] %>',
          '<%= monthlyOrderCountsCurrentYear[7] %>',
          '<%= monthlyOrderCountsCurrentYear[8] %>',
          '<%= monthlyOrderCountsCurrentYear[9] %>',
          '<%= monthlyOrderCountsCurrentYear[10] %>',
          '<%= monthlyOrderCountsCurrentYear[11] %>',
        ],
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1,
      }],
    };

    // Function to render the payment method pie chart
    function renderPaymentMethodChart() {
      const ctx = document.getElementById('paymentMethodChart').getContext('2d');
      new Chart(ctx, {
        type: 'pie',
        data: paymentMethodData,
      });
    }

    // Function to render the monthly sales bar chart
    function renderMonthlySalesChart() {
      const ctx = document.getElementById('monthlySalesChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: monthlySalesData,
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });
    }

    // Call the chart rendering functions when your data is ready
    // For example, after fetching data from the server
    renderPaymentMethodChart();
    renderMonthlySalesChart();
  </script>
  <!-- End custom js for this page-->
</body>

</html>

